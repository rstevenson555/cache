package com.bos.cache.impl;

import java.util.ArrayList;
import java.util.Iterator;
import java.util.Properties;
import java.util.Set;
import java.util.TreeSet;

public class IdleExpiringData<K, V> extends MRUData<K,V> implements java.util.Map.Entry<K,V>
{
    private K key;
    private AgedData<V> value;

    public IdleExpiringData(K key,V value)
    {
        this.key = key;
        this.value = new AgedData<V>(value);
    }

    /*public MRUData<K,V> create(K key,V value)
    {
        return new IdleExpiringData<K,V>(key,value);
    } */

    public V lookup(K key)
    {
        if ( getKey().equals(key))  {
            return getValue();
        }
        return null;
    }

    public K getKey() {
        return key;
    }

    public V getValue() {
        return value.getData();
    }

    public V setValue(V value)
    {
        this.value = new AgedData<V>(value);
        return this.value.getData();
    }

    public boolean equals(Object o)
    {
        IdleExpiringData other = (IdleExpiringData)o;
        return (getKey()==null ?  other.getKey()==null : getKey().equals(other.getKey()))  &&
            (getValue()==null ?
            other.getValue()==null : getValue().equals(other.getValue()));
    }

    /**
     * the hashCode is a xor of the key hashcode with the value hashcode
     **/
    public int hashCode()
    {
       return (getKey()==null ? 0 : getKey().hashCode()) ^
            (getValue()==null ? 0 : getValue().hashCode());
    }
}
    
